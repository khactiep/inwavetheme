!function(e){e(document).ready(function(){function i(i,t){t===!0?i.parents(".iw-shortcode").fadeOut(500,function(){e(this).addClass("iw-hidden"),e("body").css("overflow","auto")}):i.parents(".iw-shortcode").fadeOut(500,function(){e(this).addClass("iw-hidden")}),i.parents(".iw-shortcode").find(".shortcode-preview").html("")}function t(){var i=e("#iw-shortcode .shortcode-contain").outerHeight(),t=e("#iw-shortcode .shortcode-control").outerHeight(),o=e("#iw-shortcode .shortcode-save-setting").outerHeight(),a=i-(t+o);100>=a&&(a=100),e("#iw-shortcode .shortcode-content").height(a)}function o(i){e.ajax({url:iwConfig.ajaxUrl,data:{action:"load_shortcode_settings",shortcode:i},type:"post",success:function(i){e("#iw-shortcode .shortcode-content").html(i)},complete:function(){t()}})}function a(){var i=e("#iw-shortcode .shortcode-content"),t=i.find(".iw-field"),o="";if(t.length>0){var a=i.find('input[name="shortcode_tag"]').val(),s=i.find('input[name="shortcode_close_tag"]').val();o+="["+a;var n="";t.each(function(){var i=e(this).attr("name"),t=e(this).val();"content"==i?n=t:(""!==t||t>0)&&(o+=" "+i+'="'+t+'"')}),o+="]",(s>0||n)&&(o+=n,o+="[/"+a+"]")}return o}function s(i){e.isArray(i)?e(i).each(function(){e(this).parents(".field-group").removeClass("iw-hidden")}):e(i).parents(".field-group").removeClass("iw-hidden")}function n(i){e.isArray(i)?e(i).each(function(){e(this).val(""),e(this).parents(".field-group").addClass("iw-hidden")}):(e(i).val(""),e(i).parents(".field-group").addClass("iw-hidden"))}var d=null;e("#insert-iw-shortcode").live("click",function(){e("body").css("overflow","hidden"),e("#iw-list-shortcode.iw-hidden").appendTo("body").fadeIn(500,function(){e(this).removeClass("iw-hidden"),e(".iw-shortcode.list-shortcode").length>1&&e(".iw-shortcode.list-shortcode:last-child").remove()})}),e(".shortcode-control .close-btn").live("click",function(){i(e(this),!0)}),e(".shortcode-item").live("click",function(){d=e(this).data("shortcodetag"),e("#iw-shortcode .shortcode-content").html('<div class="ajax-loading"><i class="fa fa-spin fa-circle-o-notch fa-4x"></i></div>'),o(d),i(e(this),!1),e("#iw-shortcode.iw-hidden").appendTo("body").fadeIn(500,function(){t(),e(this).removeClass("iw-hidden"),e(".iw-shortcode.shortcode-item-view").length>1&&e(".iw-shortcode.shortcode-item-view:last-child").remove()})}),e(".shortcode-save-setting .cancel-settings").live("click",function(){i(e(this),!0)}),e(window).resize(function(){t()});var r;e(".iw-image-field div.image-add-image").live("click",function(i){var t=e(this);i.preventDefault(),r=wp.media({state:"insert",frame:"post",library:{type:"image"},multiple:!1}).open(),r.menu.get("view").unset("featured-image"),r.toolbar.get("view").set({insert:{style:"primary",text:"Insert",click:function(){var e=r.state().get("selection").first().toJSON();t.parent().find("div.image-preview").html('<div class="close-overlay"><span class="image-delete"><i class="fa fa-times"></i></span></div><img src="'+e.url+'" alt=""/>').removeClass("hidden");var i=t.parent().find("div.image-preview img");i.height()>i.width()?i.css("width","100%"):i.css("height","100%"),t.parents(".field-input").find(".iw-field.iw-image-field-data").val(e.id),r.close()}}})}),e(".iw-image-field .image-delete").live("click",function(i){var t=e(this);i.preventDefault(),t.parents(".iw-image-field").find("div.image-preview").addClass("iw-hidden").html(""),t.parents(".field-input").find(".iw-field.iw-image-field-data").val("")}),e(".shortcode-save-setting .save-settings").live("click",function(){window.wp.media.editor.insert(a()),i(e(this),!0)}),e(".shortcode-save-setting .preview-settings").live("click",function(){var i=a();e("#iw-shortcode .shortcode-preview").html("<iframe onload=\"jQuery('#iframe-shortcode-preview').height(jQuery('#iframe-shortcode-preview').contents().height() + 50);\" src=\""+iwConfig.ajaxUrl+"?action=load_shortcode_preview&shortcode="+escape(i)+'" style="width:100%;" scrolling="no" id="iframe-shortcode-preview"></iframe>')}),e(".field-group.iw-tabs-style select").live("change",function(){var i=e(this).val();"layout8"===i||"layout9"===i?e(".field-group.iw-tabs-image-heading").removeClass("iw-hidden"):(e(".field-group.iw-tabs-image-heading").addClass("iw-hidden"),e(".field-group.iw-tabs-image-heading input").val(""),e(".field-group.iw-tabs-image-heading .image-preview").addClass("iw-hidden").html(""))}),e(".field-group.iw-testimonials-style select").live("change",function(){var i=e(this).val(),t=e(".shortcode-content .iw-field"),o=t.get(1),a=t.get(3),d=t.get(4),r=t.get(5),c=t.get(6),l=t.get(7);switch(i){case"layout1":s([a,l,r]),n([o,d,c]);break;case"layout2":case"layout3":s([o,l,d,r]),n([a,c]);break;case"layout4":case"layout10":s([r,d]),n([o,l,a,c]);break;case"layout5":s([r,d,c]),n([o,l,a]);break;case"layout6":case"layout7":case"layout8":s([o,d,r]),n([l,a,c]);break;case"layout9":s([o,d,c]),n([l,a,r]);break;default:s([o,d,r,a,l,c])}}),e("body .preview-image").fancybox({transitionIn:"elastic",transitionOut:"elastic",speedIn:600,speedOut:200,overlayShow:!0})})}(jQuery);